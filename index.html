<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gifts Forge</title>
<style>
:root {
  --bg: #0d0d0d;
  --accent: #ff7b00;
  --text: #fff;
  --card-bg: #1a1a1a;
  --card-border: #ff7b00aa;
  --success: #4caf50;
  --fail: #e53935;
  --rare: #00aaff;
  --epic: #a200ff;
  --legendary: #ff0044;
}
*{box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;user-select:none;}
body{margin:0;background-color:var(--bg);color:var(--text);display:flex;flex-direction:column;height:100vh;overflow:hidden;}
header{text-align:center;padding:12px 0;background:#111;border-bottom:2px solid var(--accent);font-size:1.4rem;letter-spacing:1px;position:relative;}
#starBalance{position:absolute;right:20px;top:12px;font-size:1rem;color:var(--accent);}
#activeBoostDisplay{position:absolute;left:20px;top:12px;font-size:0.9rem;color:var(--accent);}
main{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:20px;overflow-y:auto;}
.hidden{display:none;}
.forge-area,.inventory,.shop{text-align:center;max-width:700px;width:100%;border:2px solid var(--card-border);background:var(--card-bg);border-radius:16px;padding:20px;margin-bottom:80px;box-shadow:0 0 10px #ff7b0033;position:relative;}
.forge-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-top:20px;position:relative;}
.forge-card{height:100px;border:2px dashed var(--accent);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;cursor:pointer;transition:0.3s;background:#222;position:relative;outline:none;}
.forge-card.selected{border:2px solid var(--accent);background:var(--accent);color:#000;transform:scale(1.05);}
#forgeButton{margin-top:20px;background:var(--accent);color:#000;border:none;border-radius:12px;padding:12px 25px;font-size:1.1rem;cursor:pointer;transition:0.2s;}
#forgeButton:hover{transform:scale(1.05);box-shadow:0 0 15px var(--accent);}
.result{margin-top:15px;font-size:1.1rem;color:var(--accent);min-height:1.2em;}
footer{position:fixed;bottom:0;left:0;width:100%;display:flex;justify-content:space-around;border-top:2px solid var(--accent);background:#111;padding:12px 0;z-index:100;}
footer button{background:none;border:none;color:var(--text);font-size:1.1rem;cursor:pointer;}
footer button.active{color:var(--accent);font-weight:bold;}
.inventory h2,.shop h2{color:var(--accent);margin-bottom:10px;}
.inventory-tabs{display:flex;justify-content:center;gap:10px;margin-bottom:10px;}
.inv-tab-btn{background:#222;border:1px solid var(--accent);color:var(--accent);padding:6px 12px;border-radius:8px;cursor:pointer;}
.inv-tab-btn.active{background:var(--accent);color:#000;font-weight:bold;}
.inventory-items,.shop-items{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}
.inv-item,.shop-item{width:90px;height:90px;border:2px solid var(--accent);border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#222;text-align:center;padding:5px;font-size:0.8rem;cursor:pointer;transition:.3s;position:relative;}
.inv-item:hover,.shop-item:hover{background:var(--accent);color:#000;}
.inv-item.rare{border-color:var(--rare);box-shadow:0 0 10px var(--rare);}
.inv-item.epic{border-color:var(--epic);box-shadow:0 0 10px var(--epic);}
.inv-item.legendary{border-color:var(--legendary);box-shadow:0 0 12px var(--legendary);}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:1000;display:none;}
.modal-content{background:#111;padding:20px;border:2px solid var(--accent);border-radius:16px;width:90%;max-width:500px;max-height:80%;overflow-y:auto;animation:fadeIn .3s;}
@keyframes fadeIn{from{opacity:0;transform:scale(0.9);}to{opacity:1;transform:scale(1);}}
.modal-content h3{color:var(--accent);margin-bottom:10px;}
.search-input{width:100%;padding:8px;margin-bottom:10px;border-radius:8px;border:1px solid #555;background:#222;color:#fff;}
.modal-item{padding:10px;border:1px solid var(--accent);border-radius:10px;margin-bottom:8px;cursor:pointer;transition:0.2s;background:#222;}
.modal-item:hover{background:var(--accent);color:#000;}
.notification{position:fixed;bottom:80px;right:20px;background:var(--accent);color:#000;padding:10px 15px;border-radius:10px;opacity:0;transition:opacity .5s;z-index:2000;}
.notification.show{opacity:1;}
.shop-tabs{display:flex;justify-content:center;gap:10px;margin-bottom:10px;}
.shop-tab-btn{background:#222;border:1px solid var(--accent);color:var(--accent);padding:6px 12px;border-radius:8px;cursor:pointer;}
.shop-tab-btn.active{background:var(--accent);color:#000;font-weight:bold;}
@keyframes pulseLine{0%{opacity:.4;}50%{opacity:1;}100%{opacity:.4;}}
#shopInfoModal .modal-content{text-align:center;}
#shopInfoModal button{margin-top:10px;padding:8px 15px;background:var(--accent);border:none;border-radius:8px;color:#000;cursor:pointer;margin-left:5px;}
</style>
</head>
<body>
<header>
  üî• Gifts Forge üî• 
  <span id="activeBoostDisplay"></span>
  <span id="starBalance">‚≠ê 10 000</span>
</header>

<main>
  <div id="forgeTab" class="forge-area">
    <h2>–ö—É–∑–Ω–∏—Ü–∞</h2>
    <p>–í—ã–±–µ—Ä–∏ 2‚Äì6 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–æ–≤–∫–∏</p>
    <canvas id="forgeCanvas" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;"></canvas>
    <div class="forge-cards" id="forgeCards" style="position:relative;z-index:1;">
      <div class="forge-card">+</div>
      <div class="forge-card">+</div>
      <div class="forge-card">+</div>
      <div class="forge-card">+</div>
      <div class="forge-card">‚≠ê</div>
      <div class="forge-card">üß©</div>
    </div>
    <button id="forgeButton">–ö–æ–≤–∞—Ç—å!</button>
    <div class="result" id="forgeResult"></div>
  </div>

  <div id="inventoryTab" class="inventory hidden">
    <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
    <div class="inventory-tabs">
      <button class="inv-tab-btn active" data-type="gifts">üéÅ –ü–æ–¥–∞—Ä–∫–∏</button>
      <button class="inv-tab-btn" data-type="mods">üß© –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</button>
      <button class="inv-tab-btn" data-type="boosts">‚ö° –ë—É—Å—Ç–µ—Ä—ã</button>
    </div>
    <div class="inventory-items" id="inventoryItems"></div>
  </div>

  <div id="shopTab" class="shop hidden">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <div class="shop-tabs">
      <button class="shop-tab-btn active" data-tab="mods">–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</button>
      <button class="shop-tab-btn" data-tab="boosts">–ë—É—Å—Ç–µ—Ä—ã</button>
    </div>
    <div class="shop-items" id="shopItems"></div>
  </div>
</main>

<footer>
  <button id="navShop">üõí Shop</button>
  <button id="navForge" class="active">üî® Forge</button>
  <button id="navInventory">üéÅ Inventory</button>
</footer>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<div class="modal" id="modal"><div class="modal-content"><h3>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</h3><input type="text" id="searchInput" class="search-input" placeholder="–ü–æ–∏—Å–∫..." /><div id="modalItems"></div><button id="closeModal">–ó–∞–∫—Ä—ã—Ç—å</button></div></div>
<div class="modal" id="modifierModal"><div class="modal-content"><h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä</h3><div id="modifierItems"></div><button id="closeModifierModal">–ó–∞–∫—Ä—ã—Ç—å</button></div></div>
<div class="modal" id="shopInfoModal"><div class="modal-content"><h3 id="shopInfoTitle"></h3><p id="shopInfoDesc"></p><div><button id="buyItemBtn">–ö—É–ø–∏—Ç—å</button><button id="backShopBtn">–ù–∞–∑–∞–¥</button></div></div></div>
<div id="notification" class="notification"></div>

<script>
const TON_TO_STARS=142;
const giftsList = [
    {name:"Plush Pepe", ton:4930},{name:"Heart Locket", ton:1210},{name:"Durov's Cap", ton:870},
    {name:"Precious Peach", ton:389.5},{name:"Heroic Helmet", ton:255},{name:"Mighty Arm", ton:199.99},
    {name:"Nail Bracelet", ton:124.8},{name:"Astral Shard", ton:119.13},{name:"Artisan Brick", ton:110.24},
    {name:"Mini Oscar", ton:93.19},{name:"Loot Bag", ton:93},{name:"Ion Gem", ton:82.38},{name:"Perfume Bottle", ton:80.62},
    {name:"Magic Potion", ton:73.9},{name:"Gem Signet", ton:66.89},{name:"Scared Cat", ton:57.69},{name:"Bonded Ring", ton:53.97},
    {name:"Westside Sign", ton:53.6},{name:"Genie Lamp", ton:47},{name:"Swiss Watch", ton:40},{name:"Sharp Tongue", ton:39.76},
    {name:"Kissed Frog", ton:31.25},{name:"Electric Skull", ton:30.4},{name:"Signet Ring", ton:27.78},{name:"Neko Helmet", ton:27},
    {name:"Low Rider", ton:26.11},{name:"Vintage Cigar", ton:25},{name:"Toy Bear", ton:24.11},{name:"Voodoo Doll", ton:18.88},
    {name:"Mad Pumpkin", ton:18.27},{name:"Diamond Ring", ton:18},{name:"Eternal Rose", ton:15.17},{name:"Ionic Dryer", ton:11.4},
    {name:"Cupid Charm", ton:11.01},{name:"Love Potion", ton:10.38},{name:"Flying Broom", ton:9.77},{name:"Trapped Heart", ton:8.67},
    {name:"Top Hat", ton:8.57},{name:"Skull Flower", ton:8.48},{name:"Crystal Ball", ton:8.24},{name:"Record Player", ton:8},
    {name:"Sky Stilettos", ton:7.32},{name:"Love Candle", ton:7.15},{name:"Sleigh Bell", ton:6.6},{name:"Snoop Cigar", ton:5.89},
    {name:"Hanging Star", ton:5.3},{name:"Sakura Flower", ton:5.21},{name:"Valentine Box", ton:4.61},{name:"Jolly Chimp", ton:4.51},
    {name:"Evil Eye", ton:4.4},{name:"Berry Box", ton:3.98},{name:"Eternal Candle", ton:3.92},{name:"Snow Mittens", ton:3.9},
    {name:"Spy Agaric", ton:3.88},{name:"Input Key", ton:3.76},{name:"Jelly Bunny", ton:3.75},{name:"Bow Tie", ton:3.6},
    {name:"Bunny Muffin", ton:3.46},{name:"Light Sword", ton:3.3},{name:"Witch Hat", ton:3.14},{name:"Hex Pot", ton:3.07},
    {name:"Lush Bouquet", ton:3.07},{name:"Joyful Bundle", ton:3.07},{name:"Snow Globe", ton:2.89},{name:"Restless Jar", ton:2.72},
    {name:"Santa Hat", ton:2.68},{name:"Easter Egg", ton:2.61},{name:"Star Notepad", ton:2.5},{name:"Moon Pendant", ton:2.5},
    {name:"Jack-in-the-Box", ton:2.4},{name:"Swag Bag", ton:2.4},{name:"Fresh Socks", ton:2.2},{name:"Spiced Wine", ton:2.19},
    {name:"Stellar Rocket", ton:2.18},{name:"Snoop Dogg", ton:2.15},{name:"Cookie Heart", ton:2.12},{name:"Jingle Bells", ton:2.12},
    {name:"Tama Gadget", ton:2.11},{name:"Hypno Lollipop", ton:2.09},{name:"Winter Wreath", ton:2.06},{name:"Party Sparkler", ton:2.06},
    {name:"Ginger Cookie", ton:2.05},{name:"Big Year", ton:2.02},{name:"Jester Hat", ton:2},{name:"Holiday Drink", ton:1.93},
    {name:"Pet Snake", ton:1.93},{name:"Homemade Cake", ton:1.91},{name:"Candy Cane", ton:1.89},{name:"Clover Pin", ton:1.88},
    {name:"Whip Cupcake", ton:1.8},{name:"Xmas Stocking", ton:1.77},{name:"Snake Box", ton:1.72},{name:"Lunar Snake", ton:1.7},
    {name:"Lol Pop", ton:1.67},{name:"B-Day Candle", ton:1.61},{name:"Desk Calendar", ton:1.5}
  ];
const modifiersPool=[
  {name:"+10% —à–∞–Ω—Å —É—Å–ø–µ—Ö–∞",effect:"forgePlus10",cost:1000,desc:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–π –∫–æ–≤–∫–∏ –Ω–∞ 10%"},
  {name:"+10% –∫ —Ü–µ–Ω–µ",effect:"plus10",cost:1000,desc:"–ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç 10% –∫ –∏—Ö —Å—Ç–æ–∏–º–æ—Å—Ç–∏"},
  {name:"¬±30% –∫ —Ü–µ–Ω–µ",effect:"plusminus30",cost:1200,desc:"–®–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å +30% –∏–ª–∏ -30% –∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–∞"},
  {name:"15% —à–∞–Ω—Å –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ",effect:"refund",cost:1500,desc:"–ï—Å—Ç—å 15% —à–∞–Ω—Å –≤–µ—Ä–Ω—É—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ"}
];
const boostersPool=[
  {name:"5 –º–∏–Ω: +20% —à–∞–Ω—Å —É—Å–ø–µ—Ö–∞",effect:"boostForge",cost:2000,duration:300000,desc:"–ù–∞ 5 –º–∏–Ω—É—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–π –∫–æ–≤–∫–∏ –Ω–∞ 20%"},
  {name:"5 –º–∏–Ω: +15% –∫ –ø—Ä–æ–¥–∞–∂–∞–º",effect:"boostSell",cost:1500,duration:300000,desc:"–ù–∞ 5 –º–∏–Ω—É—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ 15%"}
];
let stars=10000,inventory=gifts.slice(),modsInv=[],boostsInv=[],activeBoosts=[],selectedComponents=Array(6).fill(null);
let activeCardIndex=null,invTab="gifts",shopTab="mods";
const forgeCards=document.querySelectorAll(".forge-card"),forgeButton=document.getElementById("forgeButton"),forgeResult=document.getElementById("forgeResult"),starBalance=document.getElementById("starBalance"),inventoryItems=document.getElementById("inventoryItems"),modal=document.getElementById("modal"),modalItems=document.getElementById("modalItems"),closeModal=document.getElementById("closeModal"),searchInput=document.getElementById("searchInput"),modifierModal=document.getElementById("modifierModal"),modifierItems=document.getElementById("modifierItems"),closeModifierModal=document.getElementById("closeModifierModal"),shopItems=document.getElementById("shopItems"),activeBoostDisplay=document.getElementById("activeBoostDisplay"),forgeCanvas=document.getElementById("forgeCanvas"),notification=document.getElementById("notification"),shopInfoModal=document.getElementById("shopInfoModal"),shopInfoTitle=document.getElementById("shopInfoTitle"),shopInfoDesc=document.getElementById("shopInfoDesc"),buyItemBtn=document.getElementById("buyItemBtn"),backShopBtn=document.getElementById("backShopBtn"),ctx=forgeCanvas.getContext("2d");
function renderStars(){starBalance.textContent=`‚≠ê ${Math.floor(stars).toLocaleString()}`;}
function showNotification(t){notification.textContent=t;notification.classList.add("show");setTimeout(()=>notification.classList.remove("show"),2000);}
function rarityClass(v){if(v>10000)return"legendary";if(v>5000)return"epic";if(v>1000)return"rare";return"";}
function renderInventory(){inventoryItems.innerHTML="";let list=invTab==="gifts"?inventory:invTab==="mods"?modsInv:boostsInv;if(!list.length){inventoryItems.innerHTML="<p>–ü—É—Å—Ç–æ...</p>";return;}list.forEach((item,idx)=>{const div=document.createElement("div");div.className=`inv-item ${rarityClass(item.ton?item.ton*TON_TO_STARS:0)}`;div.innerHTML=item.name+(item.ton?`<br>${Math.round(item.ton*TON_TO_STARS)}‚≠ê`:"");div.onclick=()=>{if(invTab==="gifts"){if(confirm(`–ü—Ä–æ–¥–∞—Ç—å ${item.name}?`)){let p=item.ton*TON_TO_STARS;if(activeBoosts.some(b=>b.effect==="boostSell"))p*=1.15;stars+=p;inventory.splice(idx,1);renderInventory();renderStars();}}else if(invTab==="boosts"){boostsInv.splice(idx,1);activeBoosts.push({...item,activated:Date.now()});showNotification(`–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω ${item.name}`);}else if(invTab==="mods"){alert(`${item.name} –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫—É–∑–Ω–∏—Ü–µ!`);}};inventoryItems.appendChild(div);});}
document.querySelectorAll(".inv-tab-btn").forEach(b=>b.onclick=()=>{document.querySelectorAll(".inv-tab-btn").forEach(x=>x.classList.remove("active"));b.classList.add("active");invTab=b.dataset.type;renderInventory();});
function drawConnections(){const r=forgeCanvas.getBoundingClientRect();forgeCanvas.width=r.width;forgeCanvas.height=r.height;ctx.clearRect(0,0,forgeCanvas.width,forgeCanvas.height);const pts=[];forgeCards.forEach((c,i)=>{if(selectedComponents[i]){const cr=c.getBoundingClientRect();pts.push({x:(cr.left+cr.right)/2-r.left,y:(cr.top+cr.bottom)/2-r.top});}});if(pts.length<2)return;ctx.lineWidth=3+pts.length/2;ctx.shadowBlur=8+pts.length*2;ctx.shadowColor="var(--accent)";ctx.strokeStyle="rgba(255,123,0,0.6)";ctx.globalAlpha=0.5+Math.sin(Date.now()/300)*0.5;for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){ctx.beginPath();ctx.moveTo(pts[i].x,pts[i].y);ctx.lineTo(pts[j].x,pts[j].y);ctx.stroke();}ctx.globalAlpha=1;}
function renderForgeCards(){forgeCards.forEach((c,i)=>{c.textContent=selectedComponents[i]?selectedComponents[i].name:(i==4?"‚≠ê":i==5?"üß©":"+");c.classList.toggle("selected",!!selectedComponents[i]);});drawConnections();}
forgeCards.forEach((c,i)=>{c.onclick=()=>{activeCardIndex=i;if(i===4){const amt=parseInt(prompt("–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥ (1‚Äì1000):","100"));if(!isNaN(amt)&&amt>0)selectedComponents[i]={name:`‚≠ê ${amt} –∑–≤—ë–∑–¥`,ton:amt/TON_TO_STARS};renderForgeCards();return;}if(i===5){if(!modsInv.length){alert("–ù–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤!");return;}openModifierModal();return;}openModal();};});
function openModal(){modal.style.display="flex";renderModalItems();}
function closeModalFunc(){modal.style.display="none";}
closeModal.onclick=closeModalFunc;
function renderModalItems(){modalItems.innerHTML="";const f=searchInput.value.toLowerCase();inventory.forEach((it,idx)=>{if(it.name.toLowerCase().includes(f)){const d=document.createElement("div");d.className="modal-item";d.textContent=`${it.name} (${Math.round(it.ton*TON_TO_STARS)}‚≠ê)`;d.onclick=()=>{selectedComponents[activeCardIndex]=it;inventory.splice(idx,1);closeModalFunc();renderForgeCards();renderInventory();};modalItems.appendChild(d);}});}
searchInput.oninput=renderModalItems;
function openModifierModal(){modifierModal.style.display="flex";modifierItems.innerHTML="";modsInv.forEach((m,idx)=>{const d=document.createElement("div");d.className="modal-item";d.textContent=m.name;d.onclick=()=>{selectedComponents[activeCardIndex]=m;modsInv.splice(idx,1);modifierModal.style.display="none";renderForgeCards();renderInventory();};modifierItems.appendChild(d);});}
closeModifierModal.onclick=()=>modifierModal.style.display="none";
forgeButton.onclick=async()=>{
  const comps=selectedComponents.filter(x=>x);
  if(comps.length<2)return showNotification("–ú–∏–Ω–∏–º—É–º 2 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞!");
  forgeButton.disabled=true;forgeResult.textContent="–ö–æ–≤–∫–∞...";let progress=0;const interval=setInterval(()=>{forgeResult.textContent="–ö–æ–≤–∫–∞"+'.'.repeat(progress%4);progress++;},300);
  await new Promise(r=>setTimeout(r,2000));clearInterval(interval);
  const base=comps.filter(x=>x.ton).reduce((a,b)=>a+b.ton,0);const mod=selectedComponents[5];let chance=0.55;if(mod&&mod.effect==="forgePlus10")chance+=0.1;if(activeBoosts.some(b=>b.effect==="boostForge"))chance+=0.2;const roll=Math.random();
  if(roll<chance){const gift=gifts[Math.floor(Math.random()*gifts.length)];inventory.push(gift);forgeResult.textContent=`–£—Å–ø–µ—Ö! –ü–æ–ª—É—á–µ–Ω ${gift.name} (${Math.round(gift.ton*TON_TO_STARS)}‚≠ê)`;forgeResult.style.color="var(--success)";showNotification("–£—Å–ø–µ—à–Ω–∞—è –∫–æ–≤–∫–∞!");}
  else {if(mod&&mod.effect==="refund"&&Math.random()<0.15){forgeResult.textContent="–ù–µ—É–¥–∞—á–∞, –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã!";forgeResult.style.color="var(--rare)";showNotification("–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ø–∞—Å–µ–Ω—ã!");}else{forgeResult.textContent="–ù–µ—É–¥–∞—á–∞!";forgeResult.style.color="var(--fail)";}}
  selectedComponents=Array(6).fill(null);renderForgeCards();renderInventory();forgeButton.disabled=false;
};
function renderShop(tab="mods"){shopItems.innerHTML="";const pool=tab==="mods"?modifiersPool:boostersPool;pool.forEach((p,i)=>{const div=document.createElement("div");div.className="shop-item";div.innerHTML=`${p.name}<br>${p.cost}‚≠ê`;div.onclick=()=>openShopInfo(p,tab,i);shopItems.appendChild(div);});}
function openShopInfo(item,tab,idx){shopInfoTitle.textContent=item.name;shopInfoDesc.textContent=item.desc;shopInfoModal.style.display="flex";buyItemBtn.onclick=()=>{if(stars<item.cost)return showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥!");stars-=item.cost;if(tab==="mods")modsInv.push(item);else boostsInv.push(item);renderStars();renderInventory();showNotification(`–ö—É–ø–ª–µ–Ω–æ: ${item.name}`);shopInfoModal.style.display="none";};backShopBtn.onclick=()=>shopInfoModal.style.display="none";}
document.querySelectorAll(".shop-tab-btn").forEach(b=>b.onclick=()=>{document.querySelectorAll(".shop-tab-btn").forEach(x=>x.classList.remove("active"));b.classList.add("active");shopTab=b.dataset.tab;renderShop(shopTab);});
document.getElementById("navForge").onclick=()=>switchTab("forge");
document.getElementById("navInventory").onclick=()=>switchTab("inventory");
document.getElementById("navShop").onclick=()=>switchTab("shop");
function switchTab(t){document.querySelectorAll("footer button").forEach(b=>b.classList.remove("active"));document.getElementById("nav"+t.charAt(0).toUpperCase()+t.slice(1)).classList.add("active");document.getElementById("forgeTab").classList.add("hidden");document.getElementById("inventoryTab").classList.add("hidden");document.getElementById("shopTab").classList.add("hidden");document.getElementById(t+"Tab").classList.remove("hidden");if(t==="inventory")renderInventory();if(t==="shop")renderShop(shopTab);}
function updateBoosts(){const now=Date.now();activeBoosts=activeBoosts.filter(b=>now-b.activated<b.duration);if(activeBoosts.length){const n=activeBoosts[Math.floor((now/5000)%activeBoosts.length)];activeBoostDisplay.textContent=`–ê–∫—Ç–∏–≤–Ω–æ: ${n.name}`;}else activeBoostDisplay.textContent="";}
setInterval(updateBoosts,1000);
renderStars();renderForgeCards();renderInventory();renderShop();
window.addEventListener("resize",drawConnections);
</script>
</body>
</html>
