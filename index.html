<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gifts Forge</title>
  <style>
    :root {
      --bg: #0d0d0d;
      --accent: #ff7b00;
      --text: #fff;
      --card-bg: #1a1a1a;
      --card-border: #ff7b00aa;
      --success: #4caf50;
      --fail: #e53935;
    }
    * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { margin: 0; background-color: var(--bg); color: var(--text); display: flex; flex-direction: column; height: 100vh; }
    header { text-align: center; padding: 12px 0; background: #111; border-bottom: 2px solid var(--accent); font-size: 1.4rem; letter-spacing: 1px; }
    main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
    .hidden { display: none; }
    .forge-area, .inventory { text-align: center; max-width: 600px; width: 100%; border: 2px solid var(--card-border); background: var(--card-bg); border-radius: 16px; padding: 20px; box-shadow: 0 0 10px #ff7b0033; }
    .forge-area button, footer button { cursor: pointer; transition: 0.2s; }
    .forge-area button { background: var(--accent); color: #000; border: none; border-radius: 12px; padding: 12px 25px; margin-top: 20px; font-size: 1.1rem; }
    .forge-area button:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--accent); }
    .forge-items, .inventory-items { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 15px; }
    .item, .inv-item { width: 80px; height: 80px; border: 2px solid var(--card-border); border-radius: 12px; display: flex; align-items: center; justify-content: center; background: #222; text-align: center; padding: 5px; cursor: pointer; transition: 0.2s; font-size: 0.85rem; }
    .item.selected { background: var(--accent); color: #000; transform: scale(1.1); }
    .result { margin-top: 15px; font-size: 1.1rem; color: var(--accent); min-height: 1.2em; }
    footer { display: flex; justify-content: space-around; border-top: 2px solid var(--accent); background: #111; padding: 12px 0; }
    footer button { background: none; border: none; color: var(--text); font-size: 1.1rem; }
    footer button.active { color: var(--accent); font-weight: bold; }
    .inventory h2 { color: var(--accent); margin-bottom: 10px; }
    .forging { animation: glow 1s infinite; }
    @keyframes glow { 0%,100%{box-shadow:0 0 10px var(--accent)}50%{box-shadow:0 0 25px var(--accent);} }
  </style>
</head>
<body>
  <header>üî• Gifts Forge üî•</header>
  <main>
    <div id="forgeTab" class="forge-area">
      <h2>–ö—É–∑–Ω–∏—Ü–∞</h2>
      <p>–í—ã–±–µ—Ä–∏ –æ—Ç 2 –¥–æ 6 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–æ–¥–∞—Ä–æ–∫)</p>
      <div class="forge-items" id="forgeItems"></div>
      <button id="forgeButton">–ö–æ–≤–∞—Ç—å!</button>
      <div class="result" id="forgeResult"></div>
    </div>

    <div id="inventoryTab" class="inventory hidden">
      <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
      <div class="inventory-items" id="inventoryItems"></div>
    </div>
  </main>

  <footer>
    <button id="navForge" class="active">üî® Forge</button>
    <button id="navInventory">üéÅ Inventory</button>
  </footer>

  <script>
    const gifts = [
      {name:"Plush Pepe", ton:4930},{name:"Heart Locket", ton:1210},{name:"Durov's Cap", ton:870},
      {name:"Precious Peach", ton:389.5},{name:"Heroic Helmet", ton:255},{name:"Mighty Arm", ton:199.99},
      {name:"Nail Bracelet", ton:124.8},{name:"Astral Shard", ton:119.13},{name:"Artisan Brick", ton:110.24},
      {name:"Mini Oscar", ton:93.19},{name:"Loot Bag", ton:93},{name:"Ion Gem", ton:82.38},{name:"Perfume Bottle", ton:80.62},
      {name:"Magic Potion", ton:73.9},{name:"Gem Signet", ton:66.89},{name:"Scared Cat", ton:57.69},{name:"Bonded Ring", ton:53.97},
      {name:"Westside Sign", ton:53.6},{name:"Genie Lamp", ton:47},{name:"Swiss Watch", ton:40},{name:"Sharp Tongue", ton:39.76},
      {name:"Kissed Frog", ton:31.25},{name:"Electric Skull", ton:30.4},{name:"Signet Ring", ton:27.78},{name:"Neko Helmet", ton:27},
      {name:"Low Rider", ton:26.11},{name:"Vintage Cigar", ton:25},{name:"Toy Bear", ton:24.11},{name:"Voodoo Doll", ton:18.88},
      {name:"Mad Pumpkin", ton:18.27},{name:"Diamond Ring", ton:18},{name:"Eternal Rose", ton:15.17},{name:"Ionic Dryer", ton:11.4},
      {name:"Cupid Charm", ton:11.01},{name:"Love Potion", ton:10.38},{name:"Flying Broom", ton:9.77},{name:"Trapped Heart", ton:8.67},
      {name:"Top Hat", ton:8.57},{name:"Skull Flower", ton:8.48},{name:"Crystal Ball", ton:8.24},{name:"Record Player", ton:8},
      {name:"Sky Stilettos", ton:7.32},{name:"Love Candle", ton:7.15},{name:"Sleigh Bell", ton:6.6},{name:"Snoop Cigar", ton:5.89},
      {name:"Hanging Star", ton:5.3},{name:"Sakura Flower", ton:5.21},{name:"Valentine Box", ton:4.61},{name:"Jolly Chimp", ton:4.51},
      {name:"Evil Eye", ton:4.4},{name:"Berry Box", ton:3.98},{name:"Eternal Candle", ton:3.92},{name:"Snow Mittens", ton:3.9},
      {name:"Spy Agaric", ton:3.88},{name:"Input Key", ton:3.76},{name:"Jelly Bunny", ton:3.75},{name:"Bow Tie", ton:3.6},
      {name:"Bunny Muffin", ton:3.46},{name:"Light Sword", ton:3.3},{name:"Witch Hat", ton:3.14},{name:"Hex Pot", ton:3.07},
      {name:"Lush Bouquet", ton:3.07},{name:"Joyful Bundle", ton:3.07},{name:"Snow Globe", ton:2.89},{name:"Restless Jar", ton:2.72},
      {name:"Santa Hat", ton:2.68},{name:"Easter Egg", ton:2.61},{name:"Star Notepad", ton:2.5},{name:"Moon Pendant", ton:2.5},
      {name:"Jack-in-the-Box", ton:2.4},{name:"Swag Bag", ton:2.4},{name:"Fresh Socks", ton:2.2},{name:"Spiced Wine", ton:2.19},
      {name:"Stellar Rocket", ton:2.18},{name:"Snoop Dogg", ton:2.15},{name:"Cookie Heart", ton:2.12},{name:"Jingle Bells", ton:2.12},
      {name:"Tama Gadget", ton:2.11},{name:"Hypno Lollipop", ton:2.09},{name:"Winter Wreath", ton:2.06},{name:"Party Sparkler", ton:2.06},
      {name:"Ginger Cookie", ton:2.05},{name:"Big Year", ton:2.02},{name:"Jester Hat", ton:2},{name:"Holiday Drink", ton:1.93},
      {name:"Pet Snake", ton:1.93},{name:"Homemade Cake", ton:1.91},{name:"Candy Cane", ton:1.89},{name:"Clover Pin", ton:1.88},
      {name:"Whip Cupcake", ton:1.8},{name:"Xmas Stocking", ton:1.77},{name:"Snake Box", ton:1.72},{name:"Lunar Snake", ton:1.7},
      {name:"Lol Pop", ton:1.67},{name:"B-Day Candle", ton:1.61},{name:"Desk Calendar", ton:1.5}
    ];

    const TON_TO_STARS = 142;
    const forgeItemsContainer = document.getElementById('forgeItems');
    const inventoryItemsContainer = document.getElementById('inventoryItems');
    const forgeButton = document.getElementById('forgeButton');
    const forgeResult = document.getElementById('forgeResult');
    const forgeTab = document.getElementById('forgeTab');
    const inventoryTab = document.getElementById('inventoryTab');
    const navForge = document.getElementById('navForge');
    const navInventory = document.getElementById('navInventory');

    let selectedItems = [];
    let inventory = gifts.slice(0,10); // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å 10 –ø–æ–¥–∞—Ä–∫–æ–≤

    function renderForgeItems() {
      forgeItemsContainer.innerHTML = '';
      gifts.forEach((item,i)=>{
        const div=document.createElement('div');
        div.className='item';
        fetch(`gifts/${item.name}.json`)
          .then(res=>res.json())
          .then(data=>{ div.textContent = data.name || item.name })
          .catch(()=>{ div.textContent=item.name })
        div.onclick=()=>toggleSelect(i,div);
        forgeItemsContainer.appendChild(div);
      })
    }

    function toggleSelect(i,div){
      const idx = selectedItems.indexOf(i);
      if(idx>-1){ selectedItems.splice(idx,1); div.classList.remove('selected'); }
      else{ if(selectedItems.length<6){ selectedItems.push(i); div.classList.add('selected'); } }
    }

    function hasGiftSelected(){ return selectedItems.some(i=>gifts[i]); }

    forgeButton.onclick=()=>{
      if(selectedItems.length<2 || !hasGiftSelected()){
        forgeResult.textContent='‚ùó –ù—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —ç–ª–µ–º–µ–Ω—Ç–∞, –≤–∫–ª—é—á–∞—è –ø–æ–¥–∞—Ä–æ–∫!';
        return;
      }
      forgeButton.disabled=true;
      forgeResult.textContent='‚öôÔ∏è –ö–æ–≤–∫–∞ –∏–¥—ë—Ç...';
      forgeButton.classList.add('forging');

      setTimeout(()=>{
        const success = Math.random()<0.93;
        forgeButton.disabled=false;
        forgeButton.classList.remove('forging');

        if(success){
          const newGiftIndex = Math.floor(Math.random()*gifts.length);
          const newGift = gifts[newGiftIndex];
          inventory.push(newGift);
          renderInventory();
          forgeResult.innerHTML=`‚úÖ –£—Å–ø–µ—Ö! –ü–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫: ${newGift.name} (${(newGift.ton*TON_TO_STARS).toFixed(0)} ‚≠ê)`;
        } else {
          forgeResult.innerHTML='üí• –ù–µ—É–¥–∞—á–∞! –ú–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–≥–æ—Ä–µ–ª–∏.';
        }
        selectedItems=[];
        renderForgeItems();
      },1500);
    }

    function renderInventory(){
      inventoryItemsContainer.innerHTML='';
      if(inventory.length===0){ inventoryItemsContainer.innerHTML='<p>–ü—É—Å—Ç–æ...</p>'; return; }
      inventory.forEach(item=>{
        const div=document.createElement('div');
        div.className='inv-item';
        div.textContent=`${item.name} (${(item.ton*TON_TO_STARS).toFixed(0)}‚≠ê)`;
        inventoryItemsContainer.appendChild(div);
      })
    }

    navForge.onclick=()=>{
      navForge.classList.add('active'); navInventory.classList.remove('active');
      forgeTab.classList.remove('hidden'); inventoryTab.classList.add('hidden');
    }

    navInventory.onclick=()=>{
      navInventory.classList.add('active'); navForge.classList.remove('active');
      inventoryTab.classList.remove('hidden'); forgeTab.classList.add('hidden');
    }

    renderForgeItems();
    renderInventory();
  </script>
</body>
</html>
